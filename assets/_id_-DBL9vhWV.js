import{h as x}from"./menu-T1XsJnm3.js";import{r as B,a as R}from"./role-VmjJPuXv.js";import{t as _}from"./main-sIgzr7l1.js";import{k as T,a8 as b,r as o,a7 as V,V as A,_ as s,a2 as u,N as t,Z as D,I as k,j as I,Y as E}from"./vue-DuawIF-O.js";import{O as K,J as L,e as S,P as U,B as j}from"./naive-ui-CQ2AL4ly.js";const z={class:"max-w-[600px]"},J={class:"my-4"},q=T({name:"setting-role-config",__name:"[id]",setup(M){const g=b(),f=Number(g.params.id),l=o([]),v=o([]),i=o(!1);async function h(){i.value=!0;const[c,e]=await _(x()),[a,n]=await _(B(f));i.value=!1,!(c||a)&&(v.value=e,l.value=n.codes)}h();const r=o(""),d=o(!1),p=V("treeRef");async function y(){d.value=!0;const{keys:c}=p.value.getCheckedData(),{keys:e}=p.value.getIndeterminateData(),[a]=await _(R({id:f,codes:c.filter(n=>!e.includes(n)),halfCodes:e}));d.value=!1,!a&&window.$message.success("保存成功")}return(c,e)=>{const a=j,n=S,w=U,N=L,C=K;return E(),A("div",z,[s(C,{show:t(i)},{default:u(()=>[s(N,{title:"菜单管理",size:"small"},{"header-extra":u(()=>[s(a,{type:"primary",loading:t(d),onClick:y},{default:u(()=>e[2]||(e[2]=[I("保存")])),_:1},8,["loading"])]),default:u(()=>[D("div",J,[s(n,{value:t(r),"onUpdate:value":e[0]||(e[0]=m=>k(r)?r.value=m:null),placeholder:"搜索菜单"},null,8,["value"])]),s(w,{"checked-keys":t(l),"onUpdate:checkedKeys":e[1]||(e[1]=m=>k(l)?l.value=m:null),data:t(v),ref_key:"treeRef",ref:p,pattern:t(r),"label-field":"name","key-field":"code",checkable:"",cascade:"","block-line":"","show-irrelevant-nodes":!0},null,8,["checked-keys","data","pattern"])]),_:1})]),_:1},8,["show"])])}}});export{q as default};
